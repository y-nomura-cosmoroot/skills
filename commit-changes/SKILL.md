---
name: commit-changes
description: 未コミット分の変更をまとめてコミットメッセージを生成
user-invocable: true
---

# 変更内容のコミット

git statusで未コミットの変更を確認し、変更内容を分析してコミットメッセージを生成します。

## 実行手順

### 1. 変更ファイルの確認

```bash
git status
git diff
```

上記コマンドの出力から変更されたファイルをすべて特定し、各ファイルのdiffを確認してください。

### 2. 変更内容の分析

各ファイルの変更内容を確認して、以下を特定してください:

**機能追加**:
- 新しいメソッドや関数の追加
- 新しい機能の実装

**機能改善**:
- 既存機能の精度向上
- ロジックの改善
- パフォーマンスの向上

**バグ修正**:
- エラーの修正
- 誤動作の修正
- 戻り値の不整合の修正

**設定変更**:
- デフォルト値の変更
- 閾値の調整
- デバッグモードの切り替え

**リファクタリング**:
- コードの整理
- 変数名の変更
- コメントの追加
- モジュール分離
- クラスの抽出
- メソッドの共通化

### 3. コミットメッセージの生成

以下の形式でコミットメッセージを生成してください:

```
<主要な変更の概要を1行で>

- <変更点1の詳細>
  - <具体的な実装内容>
  - <具体的な実装内容>

- <変更点2の詳細>
  - <具体的な実装内容>

- <変更点3の詳細>
  - <具体的な実装内容>
```

### 4. コミットメッセージの要件

**必須要素**:
- 1行目: 変更の概要を簡潔に(50文字以内推奨)
- 2行目: 空行
- 3行目以降: 詳細な変更内容を箇条書き

**記述ルール**:
- 日本語で記述
- 技術的に正確な表現を使用
- ユーザー視点ではなく実装視点で記述
- 「〜を追加」「〜を改善」「〜を修正」などの動詞で始める

**例**:

```
台車検出精度の向上: 遠近補正と判定ロジック改善

- 遠近補正機能を追加
  - 画面位置(Y座標)に応じて距離閾値を動的調整
  - 台車の移動量判定に遠近補正を適用

- 台車移動判定ロジックの改善
  - 変位(始点終点距離)チェックを追加
  - 有意な移動回数を導入

- バグ修正
  - detect_person_direction戻り値の受け取り修正
```

### 5. 出力形式

分析結果をもとに、以下の形式で出力してください:

1. **変更ファイル一覧**
2. **主要な変更内容の説明**
3. **推奨コミットメッセージ**(コードブロックで表示)

## 注意事項

- 変更内容を正確に把握するため、必ずdiffを確認してください
- 関連性の高い変更はまとめて記述してください
- 技術的な詳細は適度に省略し、要点を押さえてください
- コミットメッセージは後から見返したときに変更内容が理解できる程度に詳細に
- デバッグモードの切り替えはコミットメッセージに含めない
